#!/bin/sh

# Output the platform for PVS: consists of the architecture-os
# currently redhat4, redhat5, or solaris.
# In each case, we try to work out the arch, os, and os_version.
# This is driven by the operating system (uname -s), since the machine type
# (uname -m) is just a number for AIX systems.
case `uname -s` in
  SunOS) case `uname -m` in
	   sun4*) arch=sun4;;
	   sun3*) arch=sun3;;
	   *)     arch=`uname -m`;;
	 esac
	 os=SunOS
         os_version=`uname -r | cut -d"." -f1`;;
  Linux) case `uname -m` in
	   i?86) arch=ix86;;
	   *)    arch=`uname -m`;;
	 esac
	 os=redhat
	 # If Linux, we need to determine the Redhat version to use.
	 if [ -f /etc/redhat-release ]
	   then os_version=`sed 's/.*release \([0-9]*\)\.\([0-9]*\) .*/\1/' \
	                      /etc/redhat-release`
	   # Not Redhat; use the libc version to try and figure it out.
	   else if [ -f /lib/libc.so.6 ]
		  then os_version=5
		  else os_version=4
		fi;
	 fi;
	 if [ $os_version -gt 5 ]; then os_version=5; fi;;
  AIX) arch=powerpc-ibm
       os=AIX
       os_version=`uname -r`;;
  *)   arch=`uname -m`
       os=`uname -s`
       os_version=`uname -r | cut -d"." -f1`;;
esac
echo "${arch}-${os}${os_version}"
